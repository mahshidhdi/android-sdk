package co.pushe.plus.datalytics

import co.pushe.plus.datalytics.messages.upstream.*
import co.pushe.plus.internal.PusheMoshi

/**
 * Function is designed to handle moshi adapters added to PusheMoshi.
 * @param moshi is the main class in sdk to handle moshi.
 * @see PusheMoshi
 * Every Json adapter generated by moshi should be added here (If not a message)
 */
fun extendMoshi(moshi: PusheMoshi) {
    moshi.enhance {
        it.add(CellArrayFactory.build())
        it.add { type, _, moshi ->
            val adapter = when (type) {
                // TODO: Do we need to add the message classes here?
                ApplicationDetailsMessage::class.java -> ApplicationDetailsMessageJsonAdapter(moshi)
                WifiInfoMessage::class.java -> WifiInfoMessageJsonAdapter(moshi)
                ConstantDataMessage::class.java -> ConstantDataMessageJsonAdapter(moshi)
                VariableDataMessage::class.java -> VariableDataMessageJsonAdapter(moshi)
                FloatingDataMessage::class.java -> FloatingDataMessageJsonAdapter(moshi)
                AppIsHiddenMessage::class.java -> AppIsHiddenMessageJsonAdapter(moshi)
                SSP::class.java -> SSPJsonAdapter(moshi)
                else -> null
            }
            adapter
        }

    }
}